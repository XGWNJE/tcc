### 停车场手动放行辅助用户脚本 · 简版 PRD

**版本:** 1.0  |  **产品:** 停车场手动放行辅助用户脚本

---

#### 1. 目的
- 在停车场 Web 界面提供醒目的信息提醒，辅助人工手动放行。
- 降低误操作与疲劳；所有操作均需人工确认。

#### 2. 范围
- 仅做“信息提示”，不做自动化控制或提交。
- 任务数据本地化管理，存储于浏览器 `localStorage`。

#### 3. 核心功能
- 车牌实时读取与高级匹配：
  - 实时监听：通过 `MutationObserver` 监听车牌显示区域的变化。
  - 鲁棒匹配：内置强大的车牌号“归一化”逻辑，以应对各种输入和显示格式：
    - **忽略大小写、空格和分隔符**：`粤 B 123-45` 会被处理为 `粤B12345`。
    - **兼容易混淆字符**：自动将 `I`, `O`, `Z` 等易看错的字母替换为对应的数字 `1`, `0`, `2`。
    - **智能保护城市代码**：归一化处理时，会保留如“粤B”中的字母`B`，避免误换。
- 本地任务匹配：将读取到的、归一化后的车牌与本地任务列表进行比对。
- 安全提醒：命中时显示高可见浮窗，不触发任何系统动作。

#### 4. UI 设计
- **统一风格**：整体采用现代化的“毛玻璃”深色主题，视觉统一且美观。
- **提示浮窗**（页面中心，`position: fixed`）：
  - 居中显示，确保在任何分辨率下都处于视觉焦点。
  - 高对比度设计，包含醒目的任务标题和高亮的金色车牌“芯片”。
  - 具备弹出动画、自动隐藏（可配置）和点击外部区域关闭的功能。
- **任务管理面板**（右下角“胶囊”按钮展开）：
  - **表单优化**：
    - `提示信息`：单行输入框，简洁明了。
    - `车牌号`：多行文本域，支持通过逗号或换行分隔输入多个车牌。
    - “添加/更新任务”和“清空”按钮，操作直观。
  - **可折叠的任务列表**：
    - 当任务数量较多时（超过3个），列表默认折叠，保持界面整洁。
    - 点击任务标题可展开/收起，查看完整的车牌列表。
    - 每个任务均提供“编辑”和“删除”按钮，并有操作反馈提示。

#### 5. 技术与安全
- 环境：Tampermonkey / Greasemonkey；语言：JavaScript。
- 存储：`localStorage`；示例：`[{ id, message, licensePlates: [] }]`。
- 监听：`MutationObserver` + DOM 查询。
- 样式：动态注入 CSS。
- 权限与安全：仅在指定 URL 生效；不模拟点击/提交；不与外部通信。

#### 6. 非功能
- 轻量、直观、易维护；不影响页面性能。